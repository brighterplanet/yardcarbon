<div class="carbon_footprint_box">
  <p><strong>769.44 kg CO<sub>2</sub>e</strong> cumulative carbon footprint</p>
  <table class="instance_types">
    <thead>
      <th>
        <td>Instance type</td>
        <td>Compute time</td>
        <td>Carbon footprint</td>
      </th>
    </thead>
    <tbody>
<%= render :partial => 'instance_type', :collection => @instances, :as => :instance %>
    </tbody>
  </table>
  <p>Powered by <a href="http://brighterplanet.com">Brighter Planet</a></p>
</div>
<script type="text/javascript">
$(document).ready(function() {
  $('.carbon_footprint_box table.instance_types tr.instance_type').each(function() {
    carrier = <%= @carrier %>;
    instanceType = this.find('td.instance_class').html();
    duration = this.find('td.duration').html();
    // FIXME the following is pseudocode pending Carbon.js documentation
    Carbon.calculate('computation', { 'carrier': carrier, 'instance_type': instanceType, 'duration': duration }, this);
  });
});
</script>
